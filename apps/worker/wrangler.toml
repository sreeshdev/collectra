name = "dish-hobby-worker"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Cron trigger - runs on 2nd of every month at 11:00 UTC
[triggers]
crons = ["0 11 2 * *"]

[observability]
[observability.logs]
enabled = false
invocation_logs = true

# Hyperdrive: connection pooling to prevent Neon/DB hangs in Workers.
# Create with: npx wrangler hyperdrive create dish-hobby-db --connection-string="postgres://USER:PASSWORD@HOST/database?sslmode=require"
# Use Neon's direct (non-pooled) connection string - uncheck "Pooled" in Neon dashboard.
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "a10fdd49d1e34291a14352b5910bf3c4"

# Environment variables should be set via:
# 1. Cloudflare Dashboard → Workers → Settings → Variables
# 2. Or using: wrangler secret put VARIABLE_NAME
#
# Required variables:
# - DATABASE_URL
# - JWT_SECRET
# - RAZORPAY_KEY_ID
# - RAZORPAY_KEY_SECRET
# - RAZORPAY_WEBHOOK_SECRET
# - WHATSAPP_TOKEN
# - WHATSAPP_PHONE_NUMBER_ID
# - WHATSAPP_TEMPLATE_NAME
# - APP_BASE_URL

